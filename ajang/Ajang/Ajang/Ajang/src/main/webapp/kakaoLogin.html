<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<style>

</style>
<body>
	<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.1.0/kakao.min.js"
		integrity="sha384-dpu02ieKC6NUeKFoGMOKz6102CLEWi9+5RQjWSV0ikYSFFd8M3Wp2reIcquJOemx"
		crossorigin="anonymous"></script>
	<script>
		Kakao.init('9a52835cd6bdda610b62d36bc22609b8'); // 여기에 실제 앱의 JavaScript 키 입력
	</script>
<a id="kakao-login-btn" href="javascript:loginWithKakao()"> <img
		src="카카오 로그인 버튼 이미지 URL" width="222" alt="로그인 하시겠습니까?" />
	</a>
	


	<script>
		function loginWithKakao() {
			Kakao.Auth.authorize({
				redirectUri : 'http://localhost:8083/Ajang/RegisterSuccess.jsp',
			});
		}

		$.ajax({
			type : "POST",
			url : 'https://kauth.kakao.com/oauth/token',
			data : {
				grant_type : 'authorization_code',
				client_id : '9a52835cd6bdda610b62d36bc22609b8',
				redirect_uri : 'http://localhost:8083/Ajang/RegisterSuccess.jsp',
				code : 'RECEIVED_AUTHORIZATION_CODE'
			},
			contentType : 'application/x-www-form-urlencoded;charset=utf-8',
			success : function(response) {
				Kakao.Auth.setAccessToken(response.access_token);
			},
			error : function(jqXHR, error) {
				console.error('Failed to get access token', error);
			}
		});
		
		// URL에서 인가 코드 추출
		function getQueryParameter(name) {
		  var regex = new RegExp('[?&]' + name + '=([^&]*)');
		  var results = regex.exec(window.location.search);
		  return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
		}

		// 인가 코드 가져오기
		var authorizationCode = getQueryParameter('code');

		
		function requestUserInfo() {
			  Kakao.API.request({
			    url: '/v2/user/me',
			  })
			  .then(function(res) {
			    alert(JSON.stringify(res));
			  })
			  .catch(function(err) {
			    alert('failed to request user information: ' + JSON.stringify(err));
			  });
			}

	</script>

</body>
</html>